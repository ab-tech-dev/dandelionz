<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Your Password - {{ app_name }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.47059;
            font-weight: 400;
            letter-spacing: -0.022em;
            color: #1d1d1f;
            background-color: #f5f5f7;
        }
        
        .email-container {
            max-width: 600px;
            margin: 40px auto;
            background-color: #ffffff;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .header {
            padding: 50px 40px 30px;
            text-align: center;
            background: linear-gradient(135deg, #ffffff 0%, #f9f9fb 100%);
        }
        
        .logo-container {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff3b30 0%, #d70015 100%);
            border-radius: 12px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            box-shadow: 0 2px 10px rgba(255, 59, 48, 0.3);
        }
        
        .logo-container svg {
            width: 28px;
            height: 28px;
            fill: white;
        }
        
        .header h1 {
            font-size: 32px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
            letter-spacing: -0.005em;
        }
        
        .header p {
            font-size: 19px;
            color: #86868b;
            font-weight: 400;
        }
        
        .content {
            padding: 0 40px 40px;
        }
        
        .alert-section {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .alert-section h2 {
            font-size: 28px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 16px;
            letter-spacing: -0.005em;
        }
        
        .alert-section p {
            font-size: 17px;
            color: #86868b;
            line-height: 1.52947;
            max-width: 480px;
            margin: 0 auto;
        }
        
        .reset-card {
            background: #f5f5f7;
            border-radius: 16px;
            padding: 40px 30px;
            margin: 40px 0;
            text-align: center;
            border: 1px solid #e5e5e7;
        }
        
        .reset-card .icon-lock {
            width: 44px;
            height: 44px;
            background: #ff9500;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
        }
        
        .reset-card .icon-lock svg {
            width: 20px;
            height: 20px;
            fill: white;
        }
        
        .reset-card h3 {
            font-size: 21px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 12px;
        }
        
        .reset-card p {
            font-size: 17px;
            color: #86868b;
            line-height: 1.52947;
            margin-bottom: 32px;
        }
        
        .reset-button {
            display: inline-block;
            background: #ff3b30;
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 980px;
            font-weight: 400;
            font-size: 17px;
            transition: all 0.15s ease;
            min-width: 160px;
            border: none;
        }
        
        .reset-button:hover {
            background: #d70015;
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(255, 59, 48, 0.4);
        }
        
        .security-tips {
            background: #fff;
            border: 1px solid #e5e5e7;
            border-radius: 12px;
            padding: 24px;
            margin: 32px 0;
        }
        
        .security-tips .tips-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .security-tips .tips-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }
        
        .security-tips .tips-icon svg {
            width: 20px;
            height: 20px;
            fill: #30d158;
        }
        
        .security-tips h4 {
            font-size: 17px;
            font-weight: 600;
            color: #1d1d1f;
        }
        
        .security-tips ul {
            list-style: none;
            padding: 0;
        }
        
        .security-tips li {
            font-size: 15px;
            color: #86868b;
            line-height: 1.46667;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .security-tips li:before {
            content: "•";
            color: #30d158;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        .warning-card {
            background: #fff8f0;
            border: 1px solid #ffcc02;
            border-radius: 12px;
            padding: 24px;
            margin: 32px 0;
        }
        
        .warning-card .warning-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .warning-card .warning-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }
        
        .warning-card .warning-icon svg {
            width: 20px;
            height: 20px;
            fill: #ffcc02;
        }
        
        .warning-card h4 {
            font-size: 17px;
            font-weight: 600;
            color: #1d1d1f;
        }
        
        .warning-card p {
            font-size: 15px;
            color: #86868b;
            line-height: 1.46667;
        }
        
        .footer {
            padding: 32px 40px;
            text-align: center;
            background: #f5f5f7;
            border-top: 1px solid #e5e5e7;
        }
        
        .footer p {
            color: #86868b;
            font-size: 13px;
            line-height: 1.53846;
            margin-bottom: 4px;
        }
        
        .footer .company-name {
            font-weight: 600;
            color: #1d1d1f;
        }
        
        .link-fallback {
            background: #f5f5f7;
            border-radius: 8px;
            padding: 16px;
            margin-top: 24px;
            word-break: break-all;
        }
        
        .link-fallback p {
            font-size: 13px;
            color: #86868b;
            margin-bottom: 8px;
        }
        
        .link-fallback a {
            color: #ff3b30;
            text-decoration: none;
            font-size: 13px;
        }
        
        @media (max-width: 600px) {
            .email-container {
                margin: 20px;
                border-radius: 16px;
            }
            
            .header {
                padding: 40px 24px 20px;
            }
            
            .content {
                padding: 0 24px 32px;
            }
            
            .footer {
                padding: 24px;
            }
            
            .header h1 {
                font-size: 28px;
            }
            
            .alert-section h2 {
                font-size: 24px;
            }
            
            .reset-card {
                padding: 32px 20px;
                margin: 32px 0;
            }
        }
        
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #000;
            }
            
            .email-container {
                background-color: #1c1c1e;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            }
            
            .header {
                background: linear-gradient(135deg, #1c1c1e 0%, #2c2c2e 100%);
            }
            
            .header h1, .alert-section h2, .reset-card h3, .security-tips h4, .warning-card h4 {
                color: #f2f2f7;
            }
            
            .header p, .alert-section p, .reset-card p, .security-tips li, .warning-card p, .link-fallback p {
                color: #8e8e93;
            }
            
            .reset-card, .link-fallback {
                background: #2c2c2e;
                border-color: #38383a;
            }
            
            .security-tips {
                background: #2c2c2e;
                border-color: #38383a;
            }
            
            .warning-card {
                background: #2c2c2e;
                border-color: #ffcc02;
            }
            
            .footer {
                background: #2c2c2e;
                border-top-color: #38383a;
            }
            
            .footer .company-name {
                color: #f2f2f7;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <!-- Header Section -->
        <div class="header">
            <div class="logo-container">
                <img src="data:image/png;base64,{{ logo_base64 }}" alt="App Logo">
            </div>
            <h1>{{ app_name }}</h1>
            <p>Account Security</p>
        </div>
        
        <!-- Main Content -->
        <div class="content">
            <div class="alert-section">
                <h2>Hello {{ user.full_name|default:user.email|cut:"@gmail.com" }}.</h2>
                <p>We received a request to reset the password for your {{ app_name }} account. Let's get you back into your account securely.</p>
            </div>
            
            <div class="reset-card">
                <div class="icon-lock">
                    <svg viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                    </svg>
                </div>
                <h3>Reset your password</h3>
                <p>Click the button below to create a new password for your account. This link is secure and will expire in 1 hour.</p>
                <a href="{{ reset_url }}" class="reset-button">Reset Password</a>
            </div>
            
            <div class="security-tips">
                <div class="tips-header">
                    <div class="tips-icon">
                        <svg viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h4>Security Information</h4>
                </div>
                <ul>
                    <li>This password reset link expires in 1 hour</li>
                    <li>The link can only be used once</li>
                    <li>Your current password remains active until reset</li>
                    <li>Choose a strong, unique password</li>
                </ul>
            </div>
            
            <div class="warning-card">
                <div class="warning-header">
                    <div class="warning-icon">
                        <svg viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h4>Didn't request this?</h4>
                </div>
                <p>If you didn't request a password reset, you can safely ignore this email. Your account remains secure and no changes have been made.</p>
            </div>
            
            <div class="link-fallback">
                <p>Having trouble with the button? Copy and paste this link:</p>
                <a href="{{ reset_url }}">{{ reset_url }}</a>
            </div>
        </div>
        
        <!-- Footer Section -->
        <div class="footer">
            <p>© 2025 <span class="company-name">{{ app_name }}</span>. All rights reserved.</p>
            <p>This email was sent to {{ user.email }}</p>
        </div>
    </div>
</body>
</html>